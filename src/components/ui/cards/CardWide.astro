---
// Import necessary modules and utilities
import { Image } from "astro:assets";
import Icon from "@components/ui/icons/Icon.astro";
import type { CollectionEntry } from "astro:content";

const { product, productLocale = "" } = Astro.props;

interface Props {
  product: CollectionEntry<"products">;
  productLocale?: string;
}

// Define classes to be used with the Image component
const imageClass =
  "absolute inset-0 h-full w-full object-cover object-center transition duration-500 ease-out group-hover:scale-105";
---

<!-- The anchor tag is the main container for the product card. When clicked, this leads to the details of the product. -->
<a
  href={productLocale && productLocale !== "en"
    ? `/${productLocale}/products/${product.id.replace(/^fr\//, "")}/`
    : `/products/${product.id.replace(/^en\//, "")}/`}
  data-astro-prefetch
  class="group relative flex flex-col overflow-hidden rounded-2xl bg-white shadow-lg transition-all duration-300 hover:shadow-2xl dark:bg-neutral-800 outline-hidden ring-orange-500 focus-visible:ring-2 dark:ring-orange-400 md:col-span-2"
>
  <!-- The product's main image container -->
  <div class="relative h-48 overflow-hidden bg-neutral-100 dark:bg-neutral-700 md:h-64">
    <img
      src={typeof product.data.main.imgCard === 'string' ? product.data.main.imgCard : product.data.main.imgCard.src}
      alt={product.data.main.imgAlt}
      draggable={false}
      class={imageClass}
    />
  </div>
  
  <!-- Product info section -->
  <div class="flex flex-col justify-between p-4 md:p-5">
    <h3 class="text-base font-bold text-neutral-800 dark:text-neutral-100 mb-2 line-clamp-2 md:text-lg">
      {product.data.title}
    </h3>
    <div class="flex items-center justify-between mt-2">
      <span class="text-sm font-medium text-orange-600 dark:text-orange-400 group-hover:text-orange-700 dark:group-hover:text-orange-300 transition-colors">
        View Details
      </span>
      <svg class="w-5 h-5 text-orange-600 dark:text-orange-400 transition-transform group-hover:translate-x-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
      </svg>
    </div>
  </div>
</a>
