---
// Importing necessary components
import MainLayout from "@/layouts/MainLayout.astro";
import PrimaryCTA from "@components/ui/buttons/PrimaryCTA.astro";
import CardSmall from "@components/ui/cards/CardSmall.astro";
import CardWide from "@components/ui/cards/CardWide.astro";
import FeaturesStatsAlt from "@components/sections/features/FeaturesStatsAlt.astro";
import TestimonialsSectionAlt from "@components/sections/testimonials/TestimonialsSectionAlt.astro";

// Importing necessary functions from Astro
import { getCollection } from "astro:content";
import type { CollectionEntry } from "astro:content";
import { SITE } from "@data/constants";

// Fetching all the product related content and sorting it by main.id
const product: CollectionEntry<"products">[] = (
  await getCollection("products", ({ id }) => {
    return id.startsWith("en/");
  })
).sort(
  (a: CollectionEntry<"products">, b: CollectionEntry<"products">) =>
    a.data.main.id - b.data.main.id
);

// Define variables for page content
const title: string = "Our Collection";
const subTitle: string =
  "Explore our handcrafted collection of authentic Peshawari Chappals. From classic Charsadda designs to modern Zalmi styles, each pair is crafted with premium leather by skilled artisans for comfort and durability.";

// Testimonial data that will be rendered in the component
const testimonials = [
  // First testimonial data
  {
    content:
      " \"I've been wearing Peshawari Chappals for years, and these are by far the most comfortable pair I've owned. The leather quality is exceptional, and they look even better with age. Perfect for both casual and traditional wear!\" ",
    author: "Tariq Mehmood",
    role: "Regular Customer | Lahore",
    avatarSrc:
      "https://images.unsplash.com/photo-1500648767791-00dcc994a43e?q=80&w=1374&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=facearea&facepad=2&w=320&h=320&q=80",
    avatarAlt: "Image Description",
  },
  // Second testimonial data
  {
    content:
      " \"Ordered the Zalmi Chappal as a gift for my father, and he absolutely loves it! The craftsmanship is remarkable, and you can see the traditional Peshawari touch in every detail. Will definitely order more for the family.\" ",
    author: "Ayesha Siddiqui",
    role: "Gift Buyer | Karachi",
    avatarSrc:
      "https://images.unsplash.com/photo-1544005313-94ddf0286df2?q=80&w=1376&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D8&auto=format&fit=facearea&facepad=2&w=320&h=320&q=80",
    avatarAlt: "Image Description",
  },
  // Third testimonial data
  {
    content:
      " \"As someone who appreciates traditional Pakistani footwear, I'm impressed by the authentic design and quality. The Imran Khan style chappal is my go-to for formal occasions. These chappals are true works of art.\" ",
    author: "Usman Ali",
    role: "Cultural Enthusiast | Peshawar",
    avatarSrc:
      "https://images.unsplash.com/photo-1474176857210-7287d38d27c6?q=80&w=1470&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D8&auto=format&fit=facearea&facepad=2&w=320&h=320&q=80",
    avatarAlt: "Image Description",
  },
];

const pageTitle: string = `Products | ${SITE.title}`;
const metaDescription =
  "Shop authentic handcrafted Peshawari Chappals. Premium leather sandals in classic Charsadda, Zalmi, and Imran Khan styles. Traditional Pakistani footwear.";
const ogTitle = "Peshawari Chappal Collection | Handcrafted Leather Sandals";
---

<MainLayout
  title={pageTitle}
  customDescription={metaDescription}
  customOgTitle={ogTitle}
  structuredData={{
    "@context": "https://schema.org",
    "@type": "WebPage",
    "@id": "https://peshawarichappal.store/products",
    url: "https://peshawarichappal.store/products",
    name: "Peshawari Chappal Collection | Handcrafted Leather Sandals",
    description:
      "Shop authentic handcrafted Peshawari Chappals. Premium leather sandals in classic Charsadda, Zalmi, and Imran Khan styles. Traditional Pakistani footwear.",
    isPartOf: {
      "@type": "WebSite",
      url: "https://peshawarichappal.store",
      name: "Peshawari Chappal",
      description:
        "Authentic handcrafted Peshawari Chappals made with premium leather. Traditional Pakistani footwear crafted for comfort and style.",
    },
    inLanguage: "en-US",
  }}
>
  <div
    class="mx-auto max-w-[85rem] px-4 py-10 sm:px-6 lg:px-8 lg:py-14 2xl:max-w-full"
  >
    <div class="mb-4 flex items-center justify-between gap-8 sm:mb-8 md:mb-12">
      <div class="flex items-center gap-12">
        <h1
          class="text-2xl font-bold tracking-tight text-balance text-neutral-800 md:text-4xl md:leading-tight dark:text-neutral-200"
        >
          {title}
        </h1>
        {
          subTitle && (
            <p class="hidden max-w-(--breakpoint-sm) text-pretty text-neutral-600 md:block dark:text-neutral-400">
              {subTitle}
            </p>
          )
        }
      </div>
      <PrimaryCTA title="Customer Stories" url="#testimonials" noArrow={true} />
    </div>
    {/* Displaying products in alternating styles. Alternative product gets different card styling.
    Maps through all product entries and displays them with either CardSmall or CardWide based on their position. */}
    <section class="grid grid-cols-1 gap-4 sm:grid-cols-3 md:gap-6 xl:gap-8">
      {
        product.map((product, index) => {
          const position = index % 4;
          if (position === 0 || position === 3) {
            return <CardSmall product={product} />;
          } else {
            return <CardWide product={product} />;
          }
        })
      }
    </section>
  </div>
  {/* Features statistics section */}
  <FeaturesStatsAlt
    title="Why Choose Peshawari Chappal?"
    subTitle="Step into authentic tradition with our handcrafted Peshawari Chappals. Whether you prefer classic designs or modern styles, our artisans create each pair with meticulous attention to detail and premium materials."
    benefits={[
      "100% genuine leather handcrafted by skilled Pakistani artisans.",
      "Traditional designs honoring centuries of Pashtun heritage.",
      "Exceptional comfort with cushioned soles for all-day wear.",
    ]}
  />
  {/* Testimonials section */}
  <TestimonialsSectionAlt
    title="What Our Customers Say"
    testimonials={testimonials}
  />
</MainLayout>
