import{a as i}from"./index.daetGfa_.js";const c=(t={})=>{let a=i(t);return a.setKey=function(e,s){let o=a.value;typeof s>"u"&&e in a.value?(a.value={...a.value},delete a.value[e],a.notify(o,e)):a.value[e]!==s&&(a.value={...a.value,[e]:s},a.notify(o,e))},a},n=c({});if(typeof localStorage<"u"){const t=localStorage.getItem("cart");t&&n.set(JSON.parse(t))}n.subscribe(t=>{typeof localStorage<"u"&&localStorage.setItem("cart",JSON.stringify(t))});function f(t){const a=n.get(),e=`${t.id}-${t.color||"default"}-${t.size||"default"}`,s=a[e];s?n.setKey(e,{...s,quantity:s.quantity+1}):n.setKey(e,{...t,productId:t.id,id:e,quantity:1})}function r(t){const a=n.get(),{[t]:e,...s}=a;n.set(s)}function l(){n.set({})}function d(t){const e=n.get()[t];e&&n.setKey(t,{...e,quantity:e.quantity+1})}function y(t){const e=n.get()[t];e&&(e.quantity>1?n.setKey(t,{...e,quantity:e.quantity-1}):r(t))}export{n as $,f as a,l as c,y as d,d as i,r};
